function validateTinyMce(n){n.length>0?postContentValidator.val(n):postContentValidator.val("");validate(postContentValidator)===!1?(showValidationMessage(postContentValidator),postContentValidator.removeClass("hide"),postContentValidator.parent().removeClass("validated")):(closeValidationMessage(postContentValidator),postContentValidator.addClass("hide"),postContentValidator.parent().addClass("validated"))}function savePost(){const n=$(".validate-input .input-element");let t=!0;for(let i=0;i<n.length;i++)validate(n[i])===!1&&(showValidationMessage(n[i]),t=!1);if(t){window.onbeforeunload=null;const n=$("#post_title").val(),t=n.replace(/\s+/g,"-").toLowerCase(),i=$("input[name='publish-post']:checked").val()==="show";$.ajax({type:"POST",url:"/Blog/Edit?handler=Save",beforeSend:function(n){n.setRequestHeader("XSRF-TOKEN",$('input:hidden[name="__RequestVerificationToken"]').val())},data:JSON.stringify({Id:$("#post_id").val(),Title:n,Excerpt:$("#post_excerpt").val(),Content:postContentValidator.val(),Categories:$("#post_categories").val(),Slug:t,PubDate:$("#post_pub_date").datepicker("getDate"),IsPublished:i}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){n.status===2&&(window.location.href=n.messages);processResultMessages(n.status,postResultRow,postResultTextContainer,n.messages)},failure:function(n){processResultMessages(0,postResultRow,postResultTextContainer,n.statusText)}})}}const postResultRow=$("#post_result_row"),postResultTextContainer=$("#post_result_text"),postContentValidator=$("#post_content_validator");$(document).ready(function(){"use strict";$("#save_post").on("click",function(n){n.preventDefault();savePost()})}),function(){function f(n){if(window.File&&window.FileList&&window.FileReader){const t=n.target.files;for(let n=0;n<t.length;n++){const i=t[n];if(i.type.match("image")){const r=new FileReader;r.addEventListener("load",function(){var n=new Image;n.alt=i.name;n.onload=function(){n.setAttribute("data-filename",i.name);n.setAttribute("width",n.width.toString());n.setAttribute("height",n.height.toString());window.tinymce.activeEditor.execCommand("mceInsertContent",!1,n.outerHTML)};n.src=this.result});r.readAsDataURL(i)}}document.body.removeChild(n.target)}else console.log("Your browser does not support File API")}function i(n){const t=n.trim();if(t.length>0)return t}const r=document.getElementById("edit_post"),e=document.getElementById("post_content");if(r&&e){typeof orientation!="undefined"||navigator.userAgent.indexOf("IEMobile")!==-1?window.tinymce.init({selector:"#post_content",theme:"modern",mobile:{theme:"mobile",plugins:["autosave","lists","autolink"],toolbar:["undo","bold","italic","styleselect"]}}):window.tinymce.init({selector:"#post_content",autoresize_min_height:200,plugins:"autosave preview searchreplace visualchars image link media fullscreen code codesample table hr pagebreak autoresize nonbreaking anchor insertdatetime advlist lists textcolor wordcount imagetools colorpicker",menubar:"edit view format insert table",toolbar1:"formatselect | bold italic blockquote forecolor backcolor | imageupload link | alignleft aligncenter alignright  | numlist bullist outdent indent | fullscreen",selection_toolbar:"bold italic | quicklink h2 h3 blockquote",autoresize_bottom_margin:0,paste_data_images:!0,image_advtab:!0,file_picker_types:"image",relative_urls:!1,convert_urls:!1,branding:!1,setup:function(n){n.addButton("imageupload",{icon:"image",onclick:function(){const n=document.createElement("input");n.type="file";n.multiple=!0;n.accept="image/*";n.addEventListener("change",f,!1);n.click()}});n.on("change",function(){validateTinyMce(n.getContent())});n.on("init",function(){validateTinyMce(n.getContent())})}});const n=r.querySelector(".delete");n&&n.addEventListener("click",function(n){confirm("Are you sure you want to delete the post?")||n.preventDefault()})}const t=document.querySelectorAll("#comments a.delete");if(t)for(let n=0;n<t.length;n++){const i=t[n];i.addEventListener("click",function(n){confirm("Are you sure you want to delete the comment?")||n.preventDefault()})}var n=document.getElementById("select_category"),u=document.getElementById("post_categories");n&&u&&(n.onchange=function(){const f=n.placeholder,e=n.value.toLowerCase(),t=f.split(",").map(function(n){return i(n)}),r=e.split(",").map(function(n){return i(n)});for(let n=r.length-1;n>=0;n--){const i=r[n];let u=!1;for(let n=t.length-1;n>=0;n--)t[n]===i&&(t.splice(n,1),u=!0);u||t.push(i)}n.placeholder=t.join(", ");u.value=n.placeholder;n.value=""})}();